{# Template parcial para a lista de participantes da sidebar #}
{% load filtros %}
<ul>
  {% for participante in sala.participantes.all %}
    {% get_perfil_de participante as perfil %}
    <li>
      {{ participante.username }}
      {% if online_ids and participante.id in online_ids %}
        <span style="color: green; font-size: 0.9em;">(conectado)</span>
      {% elif perfil and perfil.sala_atual and perfil.sala_atual.id == sala.id %}
        <span style="color: green; font-size: 0.9em;">(conectado)</span>
      {% else %}
        <span style="color: #a00; font-size: 0.9em;">(nÃ£o conectado)</span>
      {% endif %}
      {% if sala.game_master == participante %}
        <span style="color: #0077cc; font-size: 0.9em; font-weight: bold;">[GM]</span>
      {% endif %}
    </li>
  {% empty %}
    <li>Nenhum participante ainda.</li>
  {% endfor %}
  </ul>
